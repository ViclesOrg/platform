"use strict";(self.webpackChunkvicles=self.webpackChunkvicles||[]).push([[792],{844:(e,t,n)=>{var l=n(919);class i extends l.uA{#e;#t;#n;#l;#i;constructor(e,t,n,l,i){super(),this.#e=e,this.#t=t,this.#n=n,this.#l=l,this.#i=i,this.create()}create(){let e=l.Sl(null,"v_floatingMessage_image",this.#e),t=l.Pf("v_infoTitle",this.#t),n=l.Pf("v_infoMessage",this.#n),i=l.x6(null,"v_infoButton",this.#l,null),s=l.om(null,"v_floatingMessage_text_container",[t,n,i]);i.onclick=()=>{this.#i(this.component)},this.component=l.om(null,"v_floatingMessage",[e,s])}}class s extends l.uA{#s;parent;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.#s=e,this.path=t,this.parent=n,this.create()}#o(){return[{value:"fr",text:"Fr"},{value:"en",text:"En"},{value:"ar",text:"ع"}]}#a(e){let t=l.Pf("languagesMenu",e.text),n=l.om(null,"dropDownItem",[t]);return l.VQ(e.text)&&(t.style.direction="rtl"),n.setAttribute("itemValue",e.value),n}#r(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=l.x6(null,"v_fieldIcon_L",null,e),r=l.DU(null,t,n,"v_iconedfield"),c=l.x6(null,"v_fieldIcon_R invisible",null,'<i class="ri-alarm-warning-line"></i>'),u=l.om(null,"v_iconField "+s,[a,r,c]);if(i.length>0){let e=l.om(null,"v_logsign_instructions",[l.p_(i,"v_instructions_list")]);u.append(e)}return r.setAttribute("required",""),void 0!==o&&r.setAttribute("condition",o),u}#c(){let e={email:e=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e.value.toLowerCase()),password:e=>/^(?=(.*[A-Z]){2})(?=(.*\d){2})(?=(.*[!@#$%^&*(),.?":{}|<>]){2})[A-Za-z\d!@#$%^&*(),.?":{}|<>]{8,}$/.test(e.value)};return e}#u(e){return e.getElementsByClassName("v_iconedfield")[0].value}create(){let e,t=l.R_(1,"v_logo","Vicles"),n=new l.ms(null,"v_langs_menu",'<i class="ri-earth-line"></i>',this.#o(),this.#a),s=l.om(null,"v_login_head",[]),o=l.x6(null,"v_signup_return",null,'<i class="ri-arrow-left-line"></i>'),a=l.om(null,"v_signup_return_container",[o]),r=l.R_(2,"v_heading v_home_login_container_pos1","Bievenue"),c=l.R_(1,"v_heading v_home_login_container_pos2","Connectez vous"),u=this.#r('<i class="ri-font-size"></i>',"Raison sociale","text",["Ce champ est obligatoire."],"v_login_agency_name"),d=this.#r('<i class="ri-registered-line"></i>',"Registre de commerce","text",["Ce champ est obligatoire."],"v_login_rc"),p=this.#r('<i class="ri-at-line"></i>',"Adresse mail","email",["Ce champ est obligatoire.","L'email doit être valide","Jamais utilisée sur Vicles"],"v_login_email","email"),h=this.#r('<i class="ri-key-2-line"></i>',"Mot de passe","password",["Ce champ est obligatoire.","Au moin 8 caractères","2 symbole","2 alphabet majiscule","2 numéro"],"v_login_password","password"),m=this.#r('<i class="ri-map-pin-2-line"></i>',"Adresse","text",["Ce champ est obligatoire."],"v_login_address"),g=l.DU(null,"","checkbox","v_checkbox"),_=l.Pf("v_default_text","Se Souvenir de moi"),v=l.om(null,"v_keepmeSignedin",[g,_]),f=l.DU(null,"","checkbox","v_checkbox"),b=l.P7("/terms","conditions d'utilisation",null,null,"v_default_text v_size_2 v_text_align_center v_pointer"),x=l.Pf("v_default_text","J'accepte toutes les "),w=l.om(null,"v_keepmeSignedin",[f,x]),y=l.x6(null,"v_medium_button orange","Connecter",null),C=l.Pf("v_home_or_label","OR"),N=l.x6(null,"v_medium_button blue","Créer un compte"),k=l.om(null,"v_login_block",[]),A=l.om(null,"v_login_block_container",[r,c,k]),S=l.Pf("v_default_text v_size_2 v_text_align_center","ver: 1.0.0"),E=l.P7("/about","À propos",null,null,"v_default_text v_size_2 v_text_align_center v_pointer"),L=l.P7("/register","",null,null,""),P=l.P7("/contact","Contactez-nous",null,null,"v_default_text v_size_2 v_text_align_center v_pointer"),T=l.P7("/privacy","Confidentialité",null,null,"v_default_text v_size_2 v_text_align_center v_pointer"),I=l.P7("/terms","Conditions",null,null,"v_default_text v_size_2 v_text_align_center v_pointer"),V=l.om(null,"v_home_footer",[]);if(p.onclick=()=>{p.getElementsByClassName("v_iconedfield")[0].click()},x.append(b),h.onclick=()=>{h.getElementsByClassName("v_iconedfield")[0].click()},"Register"===this.#s){A.insertBefore(a,r),r.textContent="Bon choix!",r.className="v_heading v_home_signup_container_pos1",c.textContent="Créez un compte",c.className="v_heading v_home_signup_container_pos2",N.textContent="Créer",k.className="Signup_block",k.append(u,d,p,h,m,w,N),e="v_mutable_panel_register",f.setAttribute("required","");const t=new l.Dr(k,((e,t)=>{if("checkbox"!==t){const t=e.parentNode.getElementsByClassName("v_fieldIcon_R")[0];t.className=t.className.replace("invisible","red")}else e.parentNode.className+=" circle_over_danger"}),((e,t)=>{if("checkbox"!==t){const t=e.parentNode.getElementsByClassName("v_fieldIcon_R")[0];t.className=t.className.replace("red","invisible")}else e.parentNode.className="v_keepmeSignedin"}),!1,this.#c()),n=new i("/assets/welcome_1.webp","Compte créé avec succés","Un email de confirmation vous a été envoyé à votre boite mail","OK!",(e=>{e.parentNode.removeChild(e)})),s=new i("/assets/oops.webp","Agence existe déja","L'une des données utilisées (email, RC, raison sociale) pour créer le compte est déja utilisée par une autre agence.","OK!",(e=>{e.parentNode.removeChild(e)}));N.onclick=()=>{if(t.validate()){let e=new FormData;e.append("name",this.#u(u)),e.append("rc",this.#u(d)),e.append("email",this.#u(p).toLowerCase()),e.append("password",this.#u(h)),e.append("address",this.#u(m)),new l.WL("/agency/create","POST",e,(e=>{const t=JSON.parse(e);0===t.code?(history.back(),l.yA.append(n.getHTML())):1===t.code&&l.yA.append(s.getHTML())}),(()=>{}))}},o.onclick=()=>{history.back()}}else{let n=this.#r('<i class="ri-at-line"></i>',"Adresse mail","email",["Ce champ est obligatoire."],"v_login_email","email"),o=this.#r('<i class="ri-key-2-line"></i>',"Mot de passe","password",["Ce champ est obligatoire."],"v_login_password");k.append(n,o,v,y,C,N),V.append(S,E,P,T,I),s.append(t),N.onclick=()=>{L.click()},e="v_mutable_panel";const a=new l.Dr(k,((e,t)=>{const n=e.parentNode.getElementsByClassName("v_fieldIcon_R")[0];n.className=n.className.replace("invisible","red")}),((e,t)=>{const n=e.parentNode.getElementsByClassName("v_fieldIcon_R")[0];n.className=n.className.replace("red","invisible")}),!1,this.#c());y.onclick=()=>{if(a.validate()){let e=new FormData;e.append("email",this.#u(n).toLowerCase()),e.append("password",this.#u(o));const t=new i("/assets/oops.webp","Données erronées","Email ou mot de passe incorrecte","OK!",(e=>{e.parentNode.removeChild(e)}));new l.WL("/agency/login","GET",e,(e=>{const n=JSON.parse(e);n.hasOwnProperty("code")?l.yA.append(t.getHTML()):(l.N_.add("user",JSON.stringify(n)),this.parent.rerender())}),(()=>{}))}}}n.onChange=e=>{(new l.pm).add("language",e),this.parent.rerender()},n.setValue(l.N_.get("language")),this.component=l.om(null,e,[s,A,V])}}class o extends l.uA{constructor(){super(),this.create()}create(){this.component=l.om(null,"v_vicles_app",[])}}class a extends l.uA{constructor(){super(),this.path="/",this.create()}create(){if(null===l.N_.get("user")){const e=new s("Login","",this),t=l.Sl(null,"v_login_image","/assets/bg2.webp");this.addSubroute(new s("Register","/register")),this.component=l.om(null,"v_home",[t,e.getHTML()])}else{const e=new o;this.component=l.om(null,"v_home",[e.getHTML()])}}}class r extends l.uA{constructor(){super(),this.create()}create(){let e=l.Sl(null,"v_404_image","/assets/404.svg"),t=l.Pf("v_404_message","Vous êtes perdu dans l'univers de Vicles"),n=l.x6(null,"v_404_back","Retournez à la terre");n.onclick=()=>{history.back()},this.component=l.om(null,"v_404_page",[e,t,n])}}n.e(217).then(n.bind(n,217)),l.LK((()=>{let e=new a,t=new r;new l.QB(e,t).watch()}))},919:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function create(e){return document.createElement(e)}__webpack_require__.d(__webpack_exports__,{DU:()=>textBox,Dr:()=>Validator,LK:()=>entrypoit,N_:()=>prefs,P7:()=>toRoute,Pf:()=>label,QB:()=>router,R_:()=>heading,Sl:()=>image,VQ:()=>isArabic,WL:()=>brdige,ms:()=>Dropdown,om:()=>block,p_:()=>list,pm:()=>Preferences,uA:()=>Component,x6:()=>button,yA:()=>app});class Validator{#d;#p;#h;#m;#g;#_;constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.#d=e,this.#p=t,this.#h=n,this.#m=l,this.#_=i}#v(e){return"input"===e.tagName.toLowerCase()&&"button"!==e.type.toLowerCase()&&"submit"!==e.type.toLowerCase()&&"reset"!==e.type.toLowerCase()&&"image"!==e.type.toLowerCase()&&null!==e.getAttribute("required")}validate(){let e=!0;for(const t of this.#d.getElementsByTagName("input")){const n=t.type;if(this.#g=!0,this.#v(t)){if("file"===t.type.toLowerCase()&&0===t.files.length?this.#g=e=!1:"radio"!==t.type.toLowerCase()&&"checkbox"!==t.type.toLowerCase()||t.checked?""===t.value&&(this.#g=e=!1):this.#g=e=!1,null===t.getAttribute("condition")||this.#_[t.getAttribute("condition")](t)||(this.#g=e=!1),!this.#g){if(this.#m)break;this.#p(t,n)}if(this.#g){if(this.#m||null===this.#h)break;this.#h(t,n)}}}return!!e||(this.#m&&this.#p(),!1)}}class Preferences{static instance=null;#f;constructor(){if(this.#f={},null!==localStorage.getItem("b_preferences")&&(this.#f=JSON.parse(localStorage.getItem("b_preferences"))),null!==Preferences.instance)return Preferences.instance;Preferences.instance=this}add(e,t){this.#f[e]=t,localStorage.b_preferences=JSON.stringify(this.#f)}get(e){return this.#f.hasOwnProperty(e)?this.#f[e]:null}delete(e){return!!this.#f.hasOwnProperty(e)&&(delete this.#f[e],localStorage.b_preferences=JSON.stringify(this.#f),!0)}}async function Fingerprint(){const e=document.createElement("canvas"),t=e.getContext("2d");t.textBaseline="top",t.font="14px Arial",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText("fingerprint",2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText("fingerprint",4,17);const n=e.toDataURL(),l=new(window.AudioContext||window.webkitAudioContext),i=l.createOscillator();i.type="triangle",i.frequency.setValueAtTime(1e4,l.currentTime),i.start(0);const s=l.createAnalyser();s.fftSize=2048,i.connect(s);const o=new Float32Array(s.fftSize);s.getFloatTimeDomainData(o);const a=o.join(","),r=[navigator.userAgent,[screen.width,screen.height,screen.colorDepth].join("x"),navigator.language,Intl.DateTimeFormat().resolvedOptions().timeZone,navigator.platform,navigator.hardwareConcurrency,navigator.deviceMemory,navigator.maxTouchPoints,n,a].join("###"),c=(new TextEncoder).encode(r),u=await crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(u)).map((e=>e.toString(16).padStart(2,"0"))).join("")}let prefs=new Preferences;prefs.get("language")||prefs.add("language",navigator.language.split("-")[0]);const app=getId("App"),api="http://localhost:3000";function getId(e){return document.getElementById(e)}function getSelector(e){return document.querySelectorAll(e)}function list(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=create(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?"ul":"ol"),null!==l&&(e.id=l),e.className=n;for(const n of t){const t=create("li");t.textContent=n,e.appendChild(t)}return e}function object(e,t){let n=create("object");return n.data=e,n.type=t,n}function paragraph(e,t,n){let l=create("p");return"%bcode%"===n.substring(0,7).toLowerCase()?l=bcode(n=n.substring(7,n.length)):"%html%"===n.substring(0,6).toLowerCase()?l.innerHTML=n.substring(6,n.length):l.textContent=n,e&&(l.id=e),t&&(l.className=t),l}function jsonFile(e,t,n){let l=new XMLHttpRequest;l.open("GET",e,!1),l.onreadystatechange=()=>{200===l.status?t(l.responseText):n(l.statusText,l.responseText)},l.send()}function textBox(e,t,n,l){let i=create("input");return i.type=n,null!==e&&(i.id=e),i.placeholder=t,i.className=l,i}function image(e,t,n){let l=create("img");return null!==e&&(l.id=e),l.className=t,l.src=n,l.alt="",l}function block(e,t,n){let l=create("div");return null!==e&&(l.id=e),l.className=t,null!=n&&n.forEach((e=>{l.append(e)})),l}function button(e,t,n,l){let i=create("button");return null!==e&&(i.id=e),i.className=t,null!==n?i.textContent=n:null!==l&&(i.innerHTML=l),i.title="",i}function heading(e,t,n){let l=create("h"+e);return null!==t&&(l.className=t),l.textContent=n,l}function anchor(e,t,n,l){let i=create("a");return e&&(i.id=e),t&&(i.className=t),i.href=n,i.textContent=l,i}function textArea(e,t,n){let l=create("textarea");return e&&(l.id=e),l.className=t,l.placeholder=n,l}function brdige(e,t,n,l,i){let s=new XMLHttpRequest;if("GET"===t||"DELETE"===t){let o=new URLSearchParams;n.forEach(((e,t)=>{o.append(t,e)})),e+="?"+o.toString(),s.open(t,api+e),s.withCredentials=!0,s.onload=function(){200===s.status&&4===s.readyState?l(s.responseText):i(s.status)},s.send()}else{if("POST"!==t&&"PUT"!==t)throw new Error("Unsupported HTTP method");s.open(t,api+e),s.withCredentials=!0,s.onload=function(){200===s.status&&4===s.readyState?l(s.responseText):i(s.status)},s.send(n)}}function Option(e,t){let n=create("option");return n.value=e,n.textContent=t,n}function select(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=create("select");return null!==e&&(l.id=e),null!==t&&(l.className=t),null!==n&&n.forEach((e=>{let t=Option(e.value,e.text);l.append(t)})),l}function table(e,t,n){let l=create("table");return e&&(l.id=e),l.className=t,n&&n.forEach((e=>{l.append(e)})),l}function tableRow(e,t,n){let l=create("tr");return e&&(l.id=e),l.className=t,n&&n.forEach((e=>{l.append(e)})),l}function tableData(e,t,n){let l=create("td");return e&&(l.id=e),l.className=t,"string"==typeof n?l.textContent=n:l.append(n),l}function label(e,t){let n=document.createElement("span");return n.textContent=t,n.className=e,n}function audio(e,t,n){let l=create("audio");return e&&(l.id=e),t&&(l.className=t),l.src=n,l}function canvas(e){let t=document.createElement("canvas");return t.className=e,t}function isArabic(e){return!!/[\u0600-\u06FF]/.test(e)}function toBase64(e,t){let n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)}function resizeImage(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{width:200},l=canvas("builderSpecialCanvas"),i=new Image;l.width=n.width,i.onload=function(){l.height=n.width*(i.height/i.width);let e=l.height;l.getContext("2d").drawImage(i,0,0,n.width,e),t(l.toDataURL("image/jpeg",1))},i.src=e}function entrypoit(e){document.onreadystatechange=function(){"complete"===document.readyState&&e()}}function alert(e,t,n,l,i){let s=label("alertMessage",e),o=button(null,"alertOKEY alertButton",t,null),a=button(null,"alertNO alertButton",n,null),r=block("alertContainer","alertContainer",[s,o,a]),c=block("alertPlatform","builderAlert",[r]);app.append(c),a.onclick=()=>{i(c)},o.onclick=()=>{l(c)}}function insertStyle(e){let t=document.createElement("link");t.rel="stylesheet",t.href=e+"?v="+Math.random(),document.head.append(t)}function insertScript(e,t){let n=document.createElement("script");n.type=t,n.src=e+"?v="+Math.random(),document.body.append(n)}class Errors{static exists=null;static wrongCredential=null;static failure=null;static invalidSession=null;static validSession=null}function toRoute(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=create("a");return l&&(s.id=l),i&&(s.className=i),"append"===n&&(e=location.pathname+e),s.textContent=t,s.onclick=t=>{t.preventDefault(),history.pushState("","",e)},s}class Component{component;path;subroutes;connectedComponents;constructor(e){this.component=null,this.path=null,this.subroutes=[],this.connectedComponents=[]}addSubroute(e){this.subroutes.push(e)}create(){this.component=null}getHTML(){return this.component}rerender(){let e=this.component;this.create(),e.replaceWith(this.component)}muteRerender(){}hasRoute(e){let t=e[0];if(this.subroutes.forEach((e=>{e.component.parentNode===this.component&&this.component.removeChild(e.component)})),e.length>1){e=e.slice(1);for(let t=0;t<this.subroutes.length;t++){e.forEach((e=>{if(this.subroutes[t].path===e)return this.component.append(this.subroutes[t].getHTML()),this.component}));let n=this.subroutes[t].hasRoute(e);if(n)return this.component.append(n),this.component}return null}return this.path===t?(this.subroutes.forEach((e=>{e.component.parentNode===this.component&&this.component.removeChild(e.component)})),this.component):null}}function riseEvent(e,t){for(var n=arguments.length,l=new Array(n>2?n-2:0),i=2;i<n;i++)l[i-2]=arguments[i];e[t](...l)}class Dropdown extends Component{#b;#x;#w;#y;#C;#N;#k;static OPEN=1;static CLOSE=0;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;null!==t?0!==l.length?i||typeof i===Function?n?(super(),this.#b=e,this.#x=t,this.#C=l[0].value,this.#N=[],this.#y=Dropdown.CLOSE,this.#w=n,l.forEach((e=>{this.#N.push(i(e))})),this.create()):console.error("The dropdown icon must be specified [innerHTML]"):console.error("An adapter must be specified"):console.error("Items must be defined."):console.error("styleClass attribute must be defined.")}#A(e){return this.#N.find((t=>t.getAttribute("itemValue")===e))}setValue(e){const t=this.#A(e);void 0!==this.#A(e)&&this.#k.replaceChildren(t.cloneNode(!0))}create(){let e=button(null,"b_dropIcon",null,this.#w),t=block(null,"b_currentItem",null),n=block(null,"b_selectedValue",[t,e]),l=block(null,"b_listItems",[]),i=block(this.#b,"b_dropdown",[n,l]);i.classList.add(...this.#x.split(" ")),this.#k=t,l.append(...this.#N),n.onclick=()=>{this.#y===Dropdown.CLOSE?(l.style="display: block !important;",this.#y=Dropdown.OPEN):this.#y===Dropdown.OPEN&&(l.removeAttribute("style"),this.#y=Dropdown.CLOSE)},this.#N.forEach((e=>{e.onclick=()=>{t.replaceChildren(e.cloneNode(!0)),n.click(),riseEvent(this,"onChange",e.getAttribute("itemValue"))}})),t.append(this.#N[0].cloneNode(!0)),this.component=i}}class router{#S;#E;static old;constructor(e,t){this.#E=t,this.#S=e,this.old=e.path,app.append(this.#S.getHTML())}updateOLD(){this.old=document.location.pathname}watch(){window.onpopstate=()=>{this.resolve(this.old)},setInterval((()=>{let e=document.location.pathname;e!==this.old&&(this.old=e,this.resolve(e))}),60)}#L(e){let t=[];for(let n=0;n<e.length;n++){const l=e[n];""===l&&0!==n||t.push("/"+l)}return t}resolve(e){let t=this.#L(e.split("/")),n=this.#S.hasRoute(t);n?(app===this.#E.component.parentNode&&app.removeChild(this.#E.component),app.append(n)):(app===this.#S.component.parentNode&&app.removeChild(this.#S.getHTML()),app.append(this.#E.getHTML()))}static push(e){history.pushState("","",e)}}function provisory(){let e=create("span");return e.className="provisory",e}function bcode(input){const placeholderRegex=/%([^%:]+):([^%]+)%/g;let calls=[];const result=input.replace(placeholderRegex,((e,t,n)=>{const l=n.split(":");return calls.push({func:t,args:l}),provisory().outerHTML}));let p=paragraph(null,null,"");p.innerHTML=result;let provs=p.querySelectorAll(".provisory");return provs.forEach(((e,i)=>{e.replaceWith(eval(calls[i].func)(...calls[i].args))})),p}}},e=>{var t;t=844,e(e.s=t)}]);